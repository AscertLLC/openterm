/*
 * This build file was auto generated by running the Gradle 'init' task
 * by 'robw' at '21/12/16 15:04' with Gradle 3.2.1
 *
 */
ext {
    dev_id = 'walkerr'
    dev_name = 'Rob Walker'
    dev_email = 'robw@ascert.com'
    dev_organization = 'Ascert LLC'
    dev_organizationUrl = 'http://www.ascert.com'
    
    gpl_name = 'GNU Library General Public License version 2'
    gpl_url = 'https://github.com/AscertLLC/openterm/blob/master/LICENSE'    
}


allprojects {
    
    repositories {
        // Usual ones
        mavenCentral()
        jcenter()     
    }
    
    group = "com.ascert.open"
}

subprojects { 
    apply plugin: 'java'
    apply plugin: 'maven'
    apply plugin: 'signing'
    
    dependencies {
        testCompile group: 'junit', name: 'junit', version: '[4,)'
    }
    
    task javadocJar(type: Jar) {
        classifier = 'javadoc'
        javadoc.options.addBooleanOption('Xdoclint:none', true)
        javadoc.options.addStringOption('-quiet')
        from javadoc
    }
    
    task sourcesJar(type: Jar) {
        classifier = 'sources'
        from sourceSets.main.allSource
    }
    
    artifacts {
        archives javadocJar, sourcesJar
    }

    signing {
        //def signingKey = findProperty("signingKey")
        //def signingPassword = findProperty("signingPassword")
        //useInMemoryPgpKeys(signingKey, signingPassword)
        sign configurations.archives
    }

    uploadArchives {
      repositories {
        mavenDeployer {
          beforeDeployment { MavenDeployment deployment -> signing.signPom(deployment) }
    
          repository(url: "https://oss.sonatype.org/service/local/staging/deploy/maven2/") {
            authentication(userName: ossrhUsername, password: ossrhPassword)
          }
    
          snapshotRepository(url: "https://oss.sonatype.org/content/repositories/snapshots/") {
            authentication(userName: ossrhUsername, password: ossrhPassword)
          }
        }
      }
    }     
}  




